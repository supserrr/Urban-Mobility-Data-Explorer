<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYC Taxi Data Explorer - Dashboard</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend+Mega:wght@700;900&family=Public+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/matifandy8/NeoBrutalismCSS/dist/index.min.css">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="config.js"></script>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/chart-config.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-content">
                <h1 class="header-title">NYC Taxi Data Explorer</h1>
                <p class="header-subtitle">Comprehensive urban mobility analytics and visualization</p>
            </div>
            <div class="header-actions">
                <button id="refresh-btn" class="nb-button blue">
                    <i class="fas fa-sync"></i>
                    <span>Refresh</span>
                </button>
                <div id="connection-status" class="connection-status">
                    <i class="fas fa-circle"></i>
                    <span>Connected</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="app-container">
        <!-- Navigation Sidebar -->
        <nav class="sidebar">
            <div class="nav-items">
                <button class="nav-item active" data-view="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </button>
                <button class="nav-item" data-view="map">
                    <i class="fas fa-map"></i>
                    <span>3D Map</span>
                </button>
                <button class="nav-item" data-view="analytics">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Filters Panel -->
            <aside id="filters-panel" class="filters-panel">
                <div class="filters-header">
                    <h3>Filters</h3>
                    <button id="toggle-filters" class="btn-icon">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>

                <div class="filters-content">
                    <!-- Date Range -->
                    <div class="filter-group">
                        <label class="filter-label">Date Range</label>
                        <input type="datetime-local" id="start-date" class="nb-input default">
                        <span class="filter-separator">to</span>
                        <input type="datetime-local" id="end-date" class="nb-input default">
                    </div>

                    <!-- Vendor -->
                    <div class="filter-group">
                        <label class="filter-label" for="vendor-filter">Vendor</label>
                        <select id="vendor-filter" class="nb-dropdown default">
                            <option value="">All Vendors</option>
                            <option value="1">Creative Mobile Technologies</option>
                            <option value="2">VeriFone Inc</option>
                        </select>
                    </div>

                    <!-- Passenger Count -->
                    <div class="filter-group">
                        <label class="filter-label" for="passenger-filter">Passengers</label>
                        <select id="passenger-filter" class="nb-dropdown default">
                            <option value="">All</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6+</option>
                        </select>
                    </div>

                    <!-- Time of Day -->
                    <div class="filter-group">
                        <label class="filter-label" for="time-filter">Time of Day</label>
                        <select id="time-filter" class="nb-dropdown default">
                            <option value="">All Times</option>
                            <option value="0">Midnight - 6am</option>
                            <option value="6">6am - Noon</option>
                            <option value="12">Noon - 6pm</option>
                            <option value="18">6pm - Midnight</option>
                        </select>
                    </div>

                    <!-- Duration Range -->
                    <div class="filter-group">
                        <label class="filter-label">Duration (minutes)</label>
                        <div class="filter-range">
                            <input type="number" id="min-duration" class="nb-input default" placeholder="Min">
                            <span>-</span>
                            <input type="number" id="max-duration" class="nb-input default" placeholder="Max">
                        </div>
                    </div>

                    <!-- Distance Range -->
                    <div class="filter-group">
                        <label class="filter-label">Distance (km)</label>
                        <div class="filter-range">
                            <input type="number" id="min-distance" class="nb-input default" placeholder="Min" step="0.1">
                            <span>-</span>
                            <input type="number" id="max-distance" class="nb-input default" placeholder="Max" step="0.1">
                        </div>
                    </div>

                    <!-- Filter Actions -->
                    <div class="filter-actions">
                        <button id="apply-filters" class="nb-button green">
                            <i class="fas fa-filter"></i>
                            <span>Apply Filters</span>
                        </button>
                        <button id="clear-filters" class="nb-button orange">
                            <i class="fas fa-times"></i>
                            <span>Clear</span>
                        </button>
                    </div>
                </div>
            </aside>

            <!-- View Content -->
            <div class="content-area">
                <!-- Dashboard View -->
                <div id="dashboard-view" class="view-content active">
                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: #0077b6;">
                                <i class="fas fa-taxi"></i>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-label">Total Trips</h3>
                                <p class="stat-value" id="total-trips">0</p>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon" style="background: #ff5733;">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-label">Avg Duration</h3>
                                <p class="stat-value" id="avg-duration">0 min</p>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon" style="background: #ffe600;">
                                <i class="fas fa-route"></i>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-label">Avg Distance</h3>
                                <p class="stat-value" id="avg-distance">0 km</p>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon" style="background: #40d39c;">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-label">Total Passengers</h3>
                                <p class="stat-value" id="total-passengers">0</p>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Grid -->
                    <div class="charts-grid">
                        <!-- Timeline Chart -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Trip Timeline</h3>
                                <div class="chart-controls">
                                    <button class="nb-button default chart-control-btn active" data-chart="hour">Hourly</button>
                                    <button class="nb-button default chart-control-btn" data-chart="day">Daily</button>
                                    <button class="nb-button default chart-control-btn" data-chart="month">Monthly</button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="trip-timeline-chart"></canvas>
                            </div>
                        </div>

                        <!-- Passenger Distribution -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Passenger Distribution</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="passenger-chart"></canvas>
                            </div>
                        </div>

                        <!-- Duration Distribution -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Trip Duration Distribution</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="duration-chart"></canvas>
                            </div>
                        </div>

                        <!-- Distance vs Speed -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Distance vs Speed</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="distance-speed-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Map View -->
                <div id="map-view" class="view-content">
                    <div class="map-container">
                        <iframe src="index.html" class="map-iframe"></iframe>
                    </div>
                </div>

                <!-- Analytics View -->
                <div id="analytics-view" class="view-content">
                    <div class="analytics-container">
                        <h2 class="section-title">Advanced Analytics</h2>
                        <p class="section-description">Detailed analytics and insights coming soon...</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen hidden">
        <div class="loading-spinner"></div>
        <p>Loading data...</p>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="utils/api.js"></script>
    <script src="components/Dashboard.js"></script>
    <script src="components/ChartView.js"></script>
    <script src="components/MapView.js"></script>
    <script src="components/RouteManager.js"></script>
    <script src="main.js"></script>
</body>
</html>

